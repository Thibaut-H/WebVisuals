<!DOCTYPE html>

<html>

<head>
	<title>Let Go</title>
	<script src="http://threejs.org/build/three.min.js"></script>
	<link href='https://fonts.googleapis.com/css?family=Quicksand:300' rel='stylesheet' type='text/css'>
	<style>
		body{
			margin: 0;
			overflow: hidden;
			cursor: help; /* But what does it mean? */
		}
		#txt{
			position: absolute;
			width: 100%
			top: 5%;
			left: 40%;
			font-size: 3em;
			color: #CCCCCC;
			font-family: 'Quicksand', sans-serif;
			-webkit-touch-callout: none;
  			-webkit-user-select: none;   
			-moz-user-select: none;      
			-ms-user-select: none;       
			user-select: none;
		} 
	</style>
</head>
<body>
	<div id="cv"></div>
	<div id="txt">ENTER THE VOID</div>
</body>
	<script type="text/javascript">

	function init(){
		var scene = new THREE.Scene();
		var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 10, 130);

		var renderer = new THREE.WebGLRenderer();
		renderer.sortObjects = false;
		renderer.setClearColor(new THREE.Color(0x000000, 1.0));
		renderer.setSize(window.innerWidth, window.innerHeight);
		renderer.shadowMapEnabled = true;

		camera.position.x =  -20;
        camera.position.y =  10;
        camera.position.z =  0;
        camera.near = 7;
        camera.far = 60;
        camera.lookAt(scene.position);

        //Append the canvas element to the DOM
        document.getElementById("cv").appendChild(renderer.domElement);

        //Add cubes to the scene
        for(var k = -2; k <5; ++k){
        	for(var i = -2; i < 5; ++i){
	        		addCube(i*5,k*5);
	        		addCube(i*5,k*-5);
	        }
        }

		function addCube(x,z){
	        var cubeSize = 13;
	        var cubeGeometry = new THREE.BoxGeometry(cubeSize, cubeSize, cubeSize);
	        var cubeMaterial = new THREE.MeshDepthMaterial();
	        var colorMaterial =  new THREE.MeshBasicMaterial({
	        	color: 0xFFFFFF,
	        	transparent: true,
	        	blending: THREE.MultiplyBlending});
	        var cube = new THREE.SceneUtils.createMultiMaterialObject(cubeGeometry,
	        		[colorMaterial, cubeMaterial]);
	        cube.position.x = x + (x*2);
	        cube.position.y = -10;
	        cube.position.z = z + (z*2);
            cube.castShadow = true;
	        scene.add(cube);
	    }//end addCube

        render();
        function render(){
	        scene.traverse(function(e){
	        if(e instanceof THREE.Mesh){
	        		e.position.x -= .2;
	        		if(e.position.x < -20)
	        			e.position.x = 25;
	        	}
	        });
        	requestAnimationFrame(render);
        	renderer.render(scene, camera);
        }//end render

	}//end init

	function onResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    }//end onResize

	window.onload = init;
    window.addEventListener('resize', onResize, false);
	</script>
</html>